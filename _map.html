<div id='{{row.uniqueID}}-map' class='timeline-map'></div>

<script type='text/javascript'>
	$( document ).ready(function() {
		console.log( "ready!" );
		var coordinates = '{{ row.coordinates }}';
		var coordinates_arr=coordinates.split(",");
		// Make new leaflet map
		var map = L.map('{{row.uniqueID}}-map').setView([coordinates_arr[0], coordinates_arr[1]], 14);

		// City map tiles
		L.tileLayer(
			'http://{s}.tribapps.com/chicago-print/{z}/{x}/{y}.png', {
			subdomains: ['maps1'],
			attribution: 'Map data &copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
			maxZoom: 16,
			minZoom: 10
		}).addTo(map);

		// // City limits mask
		// L.tileLayer(
		// 	"http://{s}.tribapps.com/chicago-mask/{z}/{x}/{y}.png", {
		// 	subdomains: ['maps1'],
		// 	maxZoom: 16,
		// 	minZoom: 10,
		// 	opacity: 0.5
		// }).addTo(map);

		// apply icons to map by looping through the data.
		var marker{{row.uniqueID}} = L.marker([coordinates_arr[0], coordinates_arr[1]]).addTo(map);
	});
</script>
